suite: test deployment
templates:
  - serviceaccount.yaml
tests:
  - it: should work (defaults)
    set:
      image.tag: latest
    asserts:
      - hasDocuments:
          count: 1
      - containsDocument:
          kind: ServiceAccount
          apiVersion: v1
          name: version-checker

  - it: with annotations set
    set:
      serviceAccount.annotations: { "abc": "123" }
    asserts:
      - equal:
          path: metadata.annotations["abc"]
          value: "123"
